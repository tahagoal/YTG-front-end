<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YTG</title>
    <link rel="canonical" href="https://ytg.eco" />
    <meta property="og:type" content="article" />
    <meta property="og:title" content=""/>
    <meta property="og:description" content=""YTG Descriptions""
    />
    <meta property="og:url" content="https://ytg.eco" />
    <meta property="og:site_name" content="YTG Egypt" />
    <meta property="og:image" content=https://ytg.eco/assets/imgs/logo.png />
    <meta name="twitter:card" content="summary" />
    
    <link rel="shortcut icon" href="assets/imgs/favicon.ico" type="image/x-icon">
    <link rel="icon" href="assets/imgs/favicon.ico" type="image/x-icon">
    <meta name="twitter:title" content=""/>
    <meta name="twitter:image" content=https://ytg.eco/assets/imgs/logo.png />
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-130196602-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-130196602-1');
    </script>
    <script src="js/jquery.min.js"></script>

    <link href="https://fonts.googleapis.com/css?family=Quicksand" rel="stylesheet">
    <link rel="stylesheet" href="css/aos.css">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/bootstrap-social.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body id="body">
    <nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light login_nav" id="ftco-navbar">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <span class="flaticon-gavel">
                    <img src="assets/imgs/logo.png"> </span>
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav" aria-controls="ftco-nav" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="oi oi-menu"></span> Menu
            </button>

            <div class="collapse navbar-collapse" id="ftco-nav">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a href="home.html" class="nav-link">Home</a>
                    </li>
                    <li class="nav-item">
                        <a href="about.html" class="nav-link">About</a>
                    </li>
                    <li class="nav-item">
                        <a href="newsevents.html" class="nav-link">News & Events</a>
                    </li>
                    <li class="nav-item">
                        <a href="programs.html" class="nav-link">Programs & Services</a>
                    </li>
                    <li class="nav-item">
                        <a href="partners.html" class="nav-link">Partners</a>
                    </li>
                    <li class="nav-item">
                        <a href="careers.html" class="nav-link">Careers</a>
                    </li>

                    <li class="btn-li-nav login_navbar">
                        <a href="login.html" class="btn-nav login">Login</a>
                    </li>

                    <div class="dropdown">
                        <li class="btn-li-nav logout_navbar dropbtn">
                            <a href="javascript:void(0)" class="btn-nav"><img id="profile_image" src="assets/imgs/profile.jpeg" /></a>
                        </li>
                        <div class="dropdown-content">
                            <a href="profile.html">My Profile</a>
                            <a href="edit.html">Edit Profile</a>
                            <a href="" class="logout_button">Logout</a>
                        </div>
                    </div>

                </ul>
            </div>
        </div>
    </nav>

    <section class="ftco-section-2 first_section_profile" style="padding-top: 0px; padding-bottom: 0px;">
        <div class="container">
            <div class="row">
                <div class="col-sm-3"></div>
                <div class="col-sm-6">
                    <h2 style="font-weight: bold; margin-bottom: 0px; margin-top: 20px;" data-aos="fade-up">
                        Edit
                    </h2>
                    <h4 style="margin-bottom: 40px;" data-aos="fade-up">
                        My profile
                    </h4>
                    <div class="edit_row row" style="margin:0px;">
                        <div class="col-sm-6">
                            <img id="profile_p" class="center" src="assets/imgs/profile.jpeg" data-aos="fade-up">
                        </div>
                        <div class="col-sm-6">
                            <label class="btn btn-2 btn-2g center" data-aos="fade-up" style="margin-top:50px; margin-bottom: 50px;">
                                    Profile Picture <input type="file" maxlength="2048" id="imgInp" accept=".png,.jpg,.jpeg" style="display:none;">                                
                            </label>
                        </div>
                    </div>
                    <form action="#" class="form_edit">
                        <div class="row" style="margin:0px;margin-bottom: -20px;">
                            <div class="form-group col-sm-5" data-aos="fade-up">
                                <input type="text" id="register_first" class="form-control" placeholder="First name" readonly>
                            </div>
                            <div class="col-sm-2">

                            </div>
                            <div class="form-group col-sm-5" data-aos="fade-up">
                                <input type="text" id="register_last" class="form-control" placeholder="Family name" readonly>
                            </div>
                        </div>
                        <div class="form-group" data-aos="fade-up">
                            <input type="text" id="register_mobile" class="form-control" placeholder="Mobile number" readonly>
                        </div>
                        <div class="form-group" data-aos="fade-up">
                            <input type="email" id="register_mail" class="form-control" placeholder="Your e-mail" readonly>
                        </div>

                        <div class="form-group" data-aos="fade-up">
                            <input type="Password" id="current_password" class="form-control" placeholder="Your Current Password">
                        </div>

                        <div class="form-group" data-aos="fade-up">
                            <input type="Password" id="register_password" class="form-control" placeholder="Your New Password">
                        </div>

                        <div class="form-group" data-aos="fade-up">
                            <input style="width:100%;" id="register_date" type="date" class="form-control" placeholder="Date of birth">
                        </div>

                        <div class="form-group" data-aos="fade-up">
                            <input type="text" id="register_address" class="form-control" placeholder="Residence address">
                        </div>

                        <div class="form-group" data-aos="fade-up">
                            <input type="text" id="register_grad" class="form-control" placeholder="Graduation status">
                        </div>

                        <div class="form-group" data-aos="fade-up">
                            <input type="text" id="register_orgn" class="form-control" placeholder="Institute/organization">
                        </div>

                        <input type="submit" value="Save changes" class="edit_submit center btn btn-2 btn-2g" data-aos="fade-up" style="margin-top:50px; margin-bottom: 50px;">

                    </form>
                </div>
            </div>
        </div>
    </section>

        <footer class="ftco-footer ftco-bg-dark ftco-section">
        <div class="container">
            <div class="row mt-5" style="padding-bottom: 60px;">
                <div class="col-md-3">
                    <div class="ftco-footer-widget mb-4">
                        <h2 class="ftco-heading-2">youthinkgreen Egypt</h2>
                        <ul class="list-unstyled mt-3">
                            <li>
                                <a class="py-2 d-block">Think Global, Act Local</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="col-md-5">
                    <div class="ftco-footer-widget mb-4">
                        <!-- <h2 class="ftco-heading-2">Communities</h2> -->
                        <ul class="list-unstyled pages_list">
                            <li class="center">
                                <a href="about.html">About us</a> <span style="color: #d0cdc5;"> - </span>
                                <a href="news.html">News</a> <span style="color: #d0cdc5;"> - </span>
                                <a href="programs.html">Programs</a>
                            </li>
                            <li class="center">
                                <a href="partners.html">Partner</a> <span style="color: #d0cdc5;"> - </span>
                                <a href="careers.html">Careers</a><span style="color: #d0cdc5;"> - </span>
                                <a href="privacypolicy.html">Privacy Policy</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="ftco-footer-widget mb-4">
                        <ul class="list-unstyled mb-4" style="display: -webkit-inline-box;">
                            <li style="padding: 0px 15px;">
                                <a target="_blank" href="https://www.facebook.com/YouthinkgreenEgypt">
                                    <img src="assets/imgs/facebook.png">
                                </a>
                            </li>

                            <li style="padding: 0px 15px;">
                                <a target="_blank" href="https://www.linkedin.com/company/youthinkgreen---egypt/">
                                    <img alt="linked" src="assets/imgs/linked.png">
                                </a>
                            </li>

                            <li style="padding: 0px 15px;">
                                <a href="https://www.instagram.com/youthinkgreeneg/">
                                    <img src="assets/imgs/instagram.png">
                                </a>
                            </li>
                        </ul>
                        <div>
                            <button class="btn btn-2 btn-2g" id="open-popup">Subscribe</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    <div class="row extra_foot" style="background-color: #171717;">
            <div class="col-sm-12">
                <h4 style="text-align: center; color:white; font-size:14px;padding: 10px 0px 5px 0px;">created with <span>♥</span> at TALK, LLC</h4>
            </div>
        </div></footer>
</body>
<script src="js/bootstrap.min.js"></script>
<script src="js/aos.js" type="text/javascript"></script>
<script src="js/scripts_login.js" type="text/javascript"></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

<script>
    var backend_url = 'https://ytg.eco/';
    var token, user_id;
    $(document).ready(function ($) {
        token = localStorage.getItem('token');
        user_id = localStorage.getItem('user_id');
        get_user();
    });

    function getBase64(file) {
        return new Promise((resolve, reject) => {
            const reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = () => resolve(reader.result);
            reader.onerror = error => reject(error);
        });
    }

    function readURL(input) {
        if (input.files && input.files[0]) {
            if(input.files[0].size > 2097152){
                swal("Please ulpoad image with max: 2MB", "", "error", {
                        button: "Try again!",
                    });
            }
            else{
                var reader = new FileReader();
                reader.onload = function(e) {
                    $('#profile_p').attr('src', e.target.result);
                }
                reader.readAsDataURL(input.files[0]);
            }
        }
    }

    $("#imgInp").change(function() {
        readURL(this);
    });
    function formatDate(date) {
        var monthNames = [
            "January", "February", "March",
            "April", "May", "June", "July",
            "August", "September", "October",
            "November", "December"
        ];

        var day = date.getDate();
        var monthIndex = date.getMonth();
        var year = date.getFullYear();

        var month;

        if(monthNames[monthIndex] == 'January'){
             month = '01';
        }

        else if(monthNames[monthIndex] == 'February'){
             month = '02';
        }

        else if(monthNames[monthIndex] == 'March'){
             month = '03';
        }

        else if(monthNames[monthIndex] == 'April'){
             month = '04';
        }

        else if(monthNames[monthIndex] == 'May'){
             month = '05';
        }

        else if(monthNames[monthIndex] == 'June'){
             month = '06';
        }

        else if(monthNames[monthIndex] == 'July'){
             month = '07';
        }

        else if(monthNames[monthIndex] == 'August'){
             month = '08';
        }

        else if(monthNames[monthIndex] == 'September'){
             month = '09';
        }

        else if(monthNames[monthIndex] == 'October'){
             month = '10';
        }

        else if(monthNames[monthIndex] == 'November'){
             month = '11';
        }

        else if(monthNames[monthIndex] == 'December'){
             month = '12';
        }

        if(day.toString().length == 1)
            day = '0'+day.toString();
        return  year + '-' + month + '-' + day;
    }

    function parseISOString(s) {
        var b = s.split(/\D+/);
        return formatDate (new Date(Date.UTC(b[0], --b[1], b[2], b[3], b[4], b[5], b[6])));
    }

    fetch_data = function (user) {
        document.getElementById("register_first").value = user.first_name;
        document.getElementById("register_last").value = user.last_name;
        if(user.mobile != '' && user.mobile != null)
            document.getElementById("register_mobile").value = user.mobile.split('+00')[1];
        document.getElementById("register_mail").value = user.email;
        if(user.graduation_status == 'undefined')
            user.graduation_status = '';
        else
            document.getElementById("register_grad").value = user.graduation_status;
        if(user.organization == 'undefined')
            user.organization = '';
        else
            document.getElementById("register_orgn").value = user.organization;
        if(user.residence_address == 'undefined')
            user.residence_address = '';
        else
            document.getElementById("register_address").value = user.residence_address;
        if(user.date_of_birth != '' && user.date_of_birth != null)
            document.getElementById("register_date").value = parseISOString(user.date_of_birth);
    };

    $('.edit_submit').click(function (e) {
        e.preventDefault();
        var fname = $('#register_first').val();
        var lname = $('#register_last').val();
        var mobile = '+00' + $('#register_mobile').val();
        var password = $('#register_password').val();
        var current_password = $('#current_password').val();
        var mail = $('#register_mail').val();
        var graduation_status = $('#register_grad').val();
        var residence_address = $('#register_address').val();
        var organization = $('#register_orgn').val();
        var date_of_birth = $('#register_date').val();
        var dateArray = date_of_birth.split("-");
        var userImage = null;
        var file = $('#imgInp')[0].files[0];
        var url = backend_url + 'api/users/' + user_id;
        if(date_of_birth != '' && date_of_birth != null)
            var date_user = dateArray[1] + "/" + dateArray[2] + "/" + dateArray[0];
        else
            var date_user = date_of_birth;
        if (file != null){
            getBase64(file).then(function (base_data) {
                userImage = base_data;

                if (password == "") {
                    var data = {
                        'first_name': fname,
                        'last_name': lname,
                        'email': mail,
                        'mobile': mobile,
                        'image': userImage,
                        'graduation_status': graduation_status,
                        'residence_address': residence_address,
                        'date_of_birth': date_user,
                        'organization': organization
                    }
                }
                else {
                    var data = {
                        'first_name': fname,
                        'last_name': lname,
                        'password': password,
                        'image': userImage,
                        'current_password': current_password,
                        'email': mail,
                        'mobile': mobile,
                        'graduation_status': graduation_status,
                        'residence_address': residence_address,
                        'date_of_birth': date_user,
                        'organization': organization
                    }
                }
                $.ajax({
                    url: url,
                    type: 'PUT',
                    data: data,
                    headers: {"Authorization": localStorage.getItem('token')},
                    success: function (result) {
                        swal("Good job!", "User Account updated successfully", "success", {
                            button: "Got it!",
                        }).then((value) => {
                            window.location.reload();
                        });
                    },
                    error: function (error) {
                        swal(error.responseJSON.message, "", "error", {
                            button: "Try again!",
                        });
                    }
                });
            });
        }
        else{
            if (password == "") {
                var data = {
                    'first_name': fname,
                    'last_name': lname,
                    'email': mail,
                    'mobile': mobile,
                    'image': userImage,
                    'graduation_status': graduation_status,
                    'residence_address': residence_address,
                    'date_of_birth':date_user,
                    'organization': organization
                }
            }
            else {
                var data = {
                    'first_name': fname,
                    'last_name': lname,
                    'password': password,
                    'image': userImage,
                    'current_password': current_password,
                    'email': mail,
                    'mobile': mobile,
                    'graduation_status': graduation_status,
                    'residence_address': residence_address,
                    'date_of_birth':date_user,
                    'organization': organization
                }
            }
            $.ajax({
                url: url,
                type: 'PUT',
                data: data,
                headers: {"Authorization": localStorage.getItem('token')},
                success: function (result) {
                    swal("Good job!", "User Account updated successfully", "success", {
                        button: "Got it!",
                    }).then((value) => {
                        window.location.reload();
                    });
                },
                error: function (error) {
                    swal(error.responseJSON.message, "", "error", {
                        button: "Try again!",
                    });
                }
            });
        }
    });

    get_user = function () {
        var options = {
            method: 'GET',
            url: backend_url + 'api/users/' + user_id + '/profile', 
            headers: {"Authorization": localStorage.getItem('token')},
        };
        $.get(options,
            function (data) {
                var userData = data;
                if (userData.image != null && userData.image != '') {
                    document.getElementById("profile_image").src = userData.image;
                    document.getElementById("profile_p").src = userData.image;
                }
                fetch_data(data);
            }).fail( function(error){
                swal(error.responseJSON.message, "", "error", {
                    button: "Ok",
                }).then((value) => {
                    window.location.replace('home.html');
                });
            });
    }
</script>



<script type="text/javascript">
    open_mail = function(){
        // window.dojoRequire(["mojo/signup-forms/Loader"], function(L) { L.start({"baseUrl":"mc.us19.list-manage.com","uuid":"cb651c1984ff21237aea0f68d","lid":"655f98310e","uniqueMethods":true}) })
        window.location.href = 'https://eco.us19.list-manage.com/subscribe?u=cb651c1984ff21237aea0f68d&id=655f98310e';
    }

    $('#open-popup').click(function(){
        open_mail();
    })
</script>


</html>